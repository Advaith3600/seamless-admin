import{_ as v,r as P,o as i,c as o,a as s,t as u,b as h,w as y,n as m,F as f,d as p,e as g,f as x,v as w,g as N,h as b,i as S}from"./VueFeather-Bf5e6Pfw.js";const C=(t,e)=>{const n=t.__vccOpts||t;for(const[k,l]of e)n[k]=l;return n},I={components:{VueFeather:v},props:{maxVisibleButtons:{type:Number,required:!1,default:4},totalPages:{type:Number,required:!0},total:{type:Number,required:!0},perPage:{type:Number,required:!0},currentPage:{type:Number,required:!0},hasMorePages:{type:Boolean,required:!0},from:{type:Number,required:!0},to:{type:Number,required:!0}},computed:{startPage(){return this.currentPage===1?1:this.currentPage===this.totalPages?Math.max(1,this.totalPages-this.maxVisibleButtons+1):this.currentPage-1},endPage(){return Math.min(this.startPage+this.maxVisibleButtons-1,this.totalPages)},pages(){const t=[];for(let e=this.startPage;e<=this.endPage;e+=1)t.push({name:e,isDisabled:e===this.currentPage});return t},isInFirstPage(){return this.currentPage===1},isInLastPage(){return this.currentPage===this.totalPages}},methods:{onClickFirstPage(){this.$emit("pagechanged",1)},onClickPreviousPage(){this.$emit("pagechanged",this.currentPage-1)},onClickPage(t){this.$emit("pagechanged",t)},onClickNextPage(){this.$emit("pagechanged",this.currentPage+1)},onClickLastPage(){this.$emit("pagechanged",this.totalPages)},isPageActive(t){return this.currentPage===t}}},D={key:0},F={class:"flex md:justify-between items-center gap-2"},U={class:"hidden md:block"},j={class:"pagination bg-white shadow-sm rounded-lg whitespace-nowrap flex items-center md:w-auto w-full"},L={class:"pagination-item"},V={key:0,class:"flex justify-center items-center border-gray-200 px-3 py-2 cursor-not-allowed no-underline text-gray-600 h-full opacity-50"},z={class:"pagination-item"},q=["disabled"],A={key:0,class:"flex active px-3 py-2"},R=["onClick"],B={class:"md:hidden block ml-auto mr-auto"},M={class:"flex text-gray-600 no-underline text-sm"},E={class:"pagination-item"},Q=["disabled"],T={class:"pagination-item"},G={key:1,class:"flex justify-center items-center border-l border-gray-200 px-3 py-2 text-gray-600 no-underline cursor-not-allowed h-full opacity-50"};function O(t,e,n,k,l,a){const d=P("vue-feather");return n.totalPages>1?(i(),o("div",D,[s("div",F,[s("div",U," Showing "+u(n.from)+" to "+u(n.to)+" of "+u(n.total)+" results ",1),s("ul",j,[s("li",L,[a.isInFirstPage?(i(),o("span",V,[h(d,{type:"chevrons-left",size:"18"})])):(i(),o("a",{key:1,onClick:e[0]||(e[0]=y((...c)=>a.onClickFirstPage&&a.onClickFirstPage(...c),["prevent"])),class:"flex justify-center items-center border-l border-gray-200 px-3 py-2 text-gray-600 hover:bg-gray-100 no-underline h-full",href:"#",role:"button",rel:"prev"},[h(d,{type:"chevrons-left",size:"18"})]))]),s("li",z,[s("button",{type:"button",onClick:e[1]||(e[1]=(...c)=>a.onClickPreviousPage&&a.onClickPreviousPage(...c)),disabled:a.isInFirstPage,"aria-label":"Go to previous page",class:m(["border-l md:border-r-0 border-r border-gray-200 px-3 py-2 text-gray-600 no-underline text-sm h-full",a.isInFirstPage?"cursor-not-allowed opacity-50":"hover:bg-gray-100"])}," Previous ",10,q)]),(i(!0),o(f,null,p(a.pages,c=>(i(),o("li",{class:"hidden md:inline-block",key:c.name},[a.isPageActive(c.name)?(i(),o("span",A,u(c.name),1)):(i(),o("a",{key:1,class:"flex border-l border-gray-200 px-3 py-2 hover:bg-gray-100 text-gray-600 no-underline",href:"#",onClick:y(r=>a.onClickPage(c.name),["prevent"]),role:"button"},u(c.name),9,R))]))),128)),s("li",B,[s("span",M,"Page "+u(n.currentPage),1)]),s("li",E,[s("button",{type:"button",onClick:e[2]||(e[2]=(...c)=>a.onClickNextPage&&a.onClickNextPage(...c)),disabled:a.isInLastPage,"aria-label":"Go to next page",class:m(["border-l border-gray-200 px-3 py-2 text-gray-600 no-underline text-sm h-full",a.isInLastPage?"cursor-not-allowed opacity-50":"hover:bg-gray-100"])}," Next ",10,Q)]),s("li",T,[n.hasMorePages?(i(),o("a",{key:0,class:"flex justify-center items-center border-l border-gray-200 px-3 py-2 hover:bg-gray-100 text-gray-600 no-underline h-full",href:"#",onClick:e[3]||(e[3]=y((...c)=>a.onClickLastPage&&a.onClickLastPage(...c),["prevent"])),rel:"next",role:"button"},[h(d,{type:"chevrons-right",size:"18"})])):(i(),o("span",G,[h(d,{type:"chevrons-right",size:"18"})]))])])])])):g("",!0)}const W=C(I,[["render",O]]),H={components:{VueFeather:v,Pagination:W},props:["dataFetchUrl","canEdit","canDelete","keyName","fillable","routes"],data(){return{selected:new Set,page:1,search:"",perPage:10,by:this.keyName,order:"desc",loading:!0,data:[],meta:{}}},methods:{ucfirst(t){return t.charAt(0).toUpperCase()+t.slice(1)},checkIndividual(t){this.selected.has(t)?this.selected.delete(t):this.selected.add(t)},checkAll(){this.selected.size===this.data.length?this.selected=new Set:this.selected=new Set(this.data.map(t=>t[this.keyName]))},massDeleteURI(){return encodeURI([...this.selected].map((t,e)=>`ids[${e}]=${t}`).join("&"))},deleteURL(t){return encodeURI(`${this.routes.delete}?ids[0]=${t}`)},redirect(t){location.href=t},encodeQueryString(){const t=new URL(window.location);return["page","search","perPage","by","order"].forEach(e=>t.searchParams.set(e,this[e])),t},sort(t){t===this.by&&this.order==="desc"?(this.by=this.keyName,this.order="desc"):(this.by===t?this.order="desc":this.order="asc",this.by=t),this.updateState()},changePage(t){this.page=t,this.updateState()},onSearch(){this.page=1,this.updateState()},updateState(){window.history.pushState({},"",this.encodeQueryString()),this.fetchData()},fetchData(){const t={headers:{Accept:"application/json"}};this.loading=!0,fetch(this.dataFetchUrl+this.encodeQueryString().search,t).then(e=>e.json()).then(e=>{this.meta=e,this.data=e.data,this.loading=!1})}},created(){const t=new URL(window.location);["search","perPage","order","by","page"].forEach(e=>{t.searchParams.has(e)&&(this[e]=t.searchParams.get(e))}),this.fetchData()}},J={class:"flex justify-between items-center mt-4 mb-2"},K={class:"search"},X=["placeholder"],Y={class:"icon"},Z=["value"],$=["href"],ee={class:"overflow-auto"},te={class:"table"},se=["checked"],ae=["onClick"],re=["textContent"],ne={class:"flex flex-col"},le=s("th",null,null,-1),ie=["onClick"],oe=["checked","onChange"],ce={class:"flex gap-3"},de=["href"],he=["href"],ue={key:0},ge=["colspan"],ye={key:1,class:"loader"},me={key:0,class:"mt-4"};function fe(t,e,n,k,l,a){const d=P("vue-feather"),c=P("pagination");return i(),o("div",null,[s("div",J,[s("form",{class:"flex gap-2",onSubmit:e[3]||(e[3]=y((...r)=>a.onSearch&&a.onSearch(...r),["prevent"]))},[s("div",K,[x(s("input",{type:"text",placeholder:"Search in "+n.fillable.join(", "),class:"input","onUpdate:modelValue":e[0]||(e[0]=r=>l.search=r)},null,8,X),[[w,l.search]]),s("div",Y,[h(d,{type:"search"})])]),x(s("select",{name:"perPage",id:"perPage",class:"input","onUpdate:modelValue":e[1]||(e[1]=r=>l.perPage=r),onChange:e[2]||(e[2]=(...r)=>a.onSearch&&a.onSearch(...r))},[(i(),o(f,null,p([5,10,20,50,100],r=>s("option",{value:r},u(r),9,Z)),64))],544),[[N,l.perPage]])],32),n.canDelete&&l.selected.size>0?(i(),o("a",{key:0,href:n.routes.delete+"?"+a.massDeleteURI(),class:"btn red"},[h(d,{type:"trash-2"}),b(" Delete ")],8,$)):g("",!0)]),s("div",ee,[s("table",te,[s("thead",null,[s("tr",null,[s("th",null,[s("input",{type:"checkbox",checked:l.selected.size===l.data.length,onClick:e[4]||(e[4]=(...r)=>a.checkAll&&a.checkAll(...r))},null,8,se)]),(i(!0),o(f,null,p(n.fillable,r=>(i(),o("th",null,[s("div",{class:m(["flex justify-between items-center sort gap-2",r===l.by&&(l.order==="asc"?"up":"down")]),onClick:_=>a.sort(r)},[s("div",{textContent:u(a.ucfirst(r))},null,8,re),s("div",ne,[s("div",{class:m(["up flex",![n.keyName,r].includes(l.by)])},[h(d,{type:"chevron-up",strokeWidth:"3"})],2),s("div",{class:m(["down flex",![n.keyName,r].includes(l.by)])},[h(d,{type:"chevron-down",strokeWidth:"3"})],2)])],10,ae)]))),256)),le])]),s("tbody",null,[(i(!0),o(f,null,p(l.data,r=>(i(),o("tr",{class:m({selected:l.selected.has(r[n.keyName])}),onClick:_=>a.redirect(n.routes.show.replace("%key%",r[n.keyName]))},[s("td",null,[s("input",{type:"checkbox",checked:l.selected.has(r[n.keyName]),onChange:_=>a.checkIndividual(r[n.keyName]),onClick:e[5]||(e[5]=y(()=>{},["stop"]))},null,40,oe)]),(i(!0),o(f,null,p(n.fillable,_=>(i(),o("td",null,u(r[_]),1))),256)),s("td",null,[s("div",ce,[n.canEdit?(i(),o("a",{key:0,href:n.routes.edit.replace("%key%",r[n.keyName]),class:"btn yellow small link",onClick:e[6]||(e[6]=y(()=>{},["stop"]))},[h(d,{type:"edit"}),b(" Edit ")],8,de)):g("",!0),n.canDelete?(i(),o("a",{key:1,href:a.deleteURL(r[n.keyName]),class:"btn red small link",onClick:e[7]||(e[7]=y(()=>{},["stop"]))},[h(d,{type:"trash-2"}),b(" Delete ")],8,he)):g("",!0)])])],10,ie))),256)),l.data.length===0?(i(),o("tr",ue,[s("td",{colspan:n.fillable.length+2,class:"text-center"},"No data found",8,ge)])):g("",!0),l.loading?(i(),o("tr",ye,[h(d,{type:"loader",animation:"spin",stroke:"white",size:"38"})])):g("",!0)])])]),Object.keys(l.meta).length?(i(),o("div",me,[h(c,{"total-pages":l.meta.last_page,total:l.meta.total,"per-page":l.meta.per_page,"current-page":l.meta.current_page,"has-more-pages":l.meta.current_page<l.meta.last_page,from:l.meta.from,to:l.meta.to,onPagechanged:e[8]||(e[8]=r=>a.changePage(r))},null,8,["total-pages","total","per-page","current-page","has-more-pages","from","to"])])):g("",!0)])}const pe=C(H,[["render",fe]]);S({components:{"type-index":pe}}).mount("#app");
